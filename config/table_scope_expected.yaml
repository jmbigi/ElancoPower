core_tables:
  - ACDOCA        # Universal Journal (account-based + replaces BSEG/COEP/FAGLFLEXA)
  - ACDOCA_T      # Totales agregados
  - BKPF          # Cabecera documentos FI
  - AUFK          # Ordenes internas
  - CSKS          # Maestro centros de costo
  - CSKA          # Maestro elementos de costo
  - VBAK          # Cabecera OV
  - VBAP          # Posición OV
  - VBUK          # Estatus cabecera OV
  - VBUP          # Estatus posición OV
  - EKKO          # Cabecera OC
  - EKPO          # Posición OC
  - MKPF          # Cabecera movimientos material
  - MSEG          # Posiciones movimientos material
  - MARD          # Stock por almacén
  - MBEW          # Valorización material
  - MARA          # Maestro material
  - MAKT          # Descripciones material (promovida a core para UX/KPIs legibles)
  - MARC          # Material por planta (promovida; necesaria para granularidad WERKS)
  - KNA1          # Maestro cliente
  - LFA1          # Maestro proveedor
  - BUT000        # Business Partner (canónico)
  - SKA1          # Plan de cuentas (jerarquías contables)
  - T001          # Sociedades (company codes)
  - SKAT          # Textos de cuentas contables (legibilidad reportes FI)
  - KNB1          # Cliente por sociedad (condiciones de pago, riesgo crédito)
  - KNVV          # Cliente vista comercial (canal, sector, oficina ventas)
  - LFB1          # Proveedor por sociedad (condiciones de pago AP)
  - T001W         # Plantas / centros logísticos (nombres legibles)
  - EKET          # Programación de entregas (cumplimiento proveedores)
  - CKMLCR        # Cost component split (Material Ledger - costos estándar)
  - CSKT          # Textos centros de costo (legibilidad OPEX/CO)

conditional_tables:
  - VBEP          # Schedule lines / backlog / aging (ventas)
  - KONV          # Condiciones de precio (detalle pricing)
  - VBFA          # Flujo documentos venta (pipeline conversión)
  - MCHB          # Stock por lote (trazabilidad, vencimientos)
  - CE1XXXX       # CO-PA actual (si Costing-Based)
  - CE4XXXX       # CO-PA plan (si Costing-Based)
  - STXL          # Textos largos (requiere declustering en SLT)

excluded_tables:
  - BSEG
  - COEP
  - FAGLFLEXA

optional_tables:
  - KONP      # Variante condiciones (solo si análisis granular de pricing)

recommended_additional_candidates:
  CEPC: "Profit Center master (needed if PRCTR dimensional analytics beyond code list)"
  SKB1: "G/L account company code data (if statements need local attributes)"
  TCURR: "Exchange rates (if multi-currency normalization is required)"
  TCURF: "Exchange rate types (support for currency conversion logic)"
  MSKA: "Special stock (consignment) if inventory KPIs need it"
  MAST: "Material to BOM link (if future manufacturing analytics considered)"

rules:
  max_core_tables: 40
  min_core_tables: 15
  expected_core_count: 32   # actualizado tras promoción de 8 tablas críticas
  max_total_tables: 39      # core 32 + condicionales (7) = 39 (rango 32–39)
  include_optional_if: "Confirmed KPI dependency OR activation of Costing-Based CO-PA"

metadata:
  version: "2025-11-09-reclass3"
  note: "Promoted 8 critical semantic tables (SKAT, KNB1, KNVV, LFB1, T001W, EKET, CKMLCR, CSKT); new canonical range 32–39 (core 32 + up to 7 conditional)."